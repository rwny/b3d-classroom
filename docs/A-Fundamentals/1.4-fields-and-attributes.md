# 1.4 Fields and Attributes

ใน Geometry Nodes ระบบ “Field” และ “Attribute” เป็นหัวใจสำคัญที่ช่วยให้เราควบคุมค่าต่าง ๆ ในแต่ละจุดของ Geometry ได้อย่างยืดหยุ่นและมีประสิทธิภาพ  
ทั้งสองอย่างนี้เกี่ยวข้องกับข้อมูลที่ไหลผ่าน node graph เพื่อควบคุมลักษณะของ geometry ในระดับจุด (point), เส้น (edge), ระนาบ/พื้นผิว (face)

---

## 1.4.1 Fields คืออะไร?

**Field** คือรูปแบบของข้อมูลที่สามารถวัดได้ เปลี่ยนแปลงได้ในแต่ละตำแหน่งบน geometry (จุด เส้น ระนาบ ...)
   
ตัวอย่างเช่น ค่าความสว่างบนพื้น ในห้องขนาด 5x5 เมตร ที่มีประตู 1 บาน ความสว่างของแต่ละจุดบนพื้นจะไม่เท่ากัน จุดที่อยู่ใกล้ จะสว่างมากกว่าจุดที่อยู่ไกลหน้าต่าง 

เราจะเก็บข้อมูลนี้ได้ด้วยการ นำเซนเซอร์วัดความสว่างไปว่างที่จุดต่างๆ แล้วบันทึกไว้ (ในรูป ให้จุดสีแดง เป็นเครื่องวัด ความสว่าง ที่ตัววัดแต่ละตัวที่ตำแหน่งต่างๆ )

ในทาง 3D เราสร้าง grid ของจุด 5*5 แล้วเราจะเก็บค่าที่วัดได้ ไว้ในจุดนั้นๆ 
ข้อมูลที่ได้ 5*5 = 25 ชุดข้อมูลนี้ เรียกว่า Field ของความสว่าง ที่วัดได้

![image](../images/field/field150056.png)




<!-- image -->
Fields จะไหลผ่าน node graph เหมือน “เส้นทางคำนวณ” และถูกเรียกมาใช้งานภายหลังความความต้องการ เมื่อเรียกใช้
-  มีการทำงานแบบ lazy evaluation — ค่าจะถูกคำนวณเมื่อจำเป็นต้องใช้
-  เก็บข้อมูลที่ใด้ในรูปตัวแปร เรียกว่า Attribute แอททริบิวต์ 
<!-- -  ถูกนำไปประเมินค่าบน Geometry (รูปทรงเรขาคณิต) -->
-  ให้ผลลัพธ์ออกมาเป็นข้อมูล
-  สามารถนำมารวมกันเพื่อสร้าง Field ใหม่ได้

## 1.4.2 Attributes คืออะไร?

**Attribute** คือข้อมูลที่ผูกอยู่กับ geometry เช่นข้อมูลที่ระบุไว้กับจุด เส้น ระนาบ

จากตัวอย่างข้างต้น ค่าความสว่างที่จุดต่างๆ จุดที่อยู่ใกล้ประตู มีค่ามากกว่าจุดที่อยู่ไกล จุดต่างๆ จะมีค่าตามที่วัดได้ในแต่ละจุดที่เรากำหนดขึ้นมา ดังที่แสดงเป็นตัวเลข

![image](../images/field/field150108.png)

-   ข้อมูลของ Geometry ที่สามารถถูกจัดเก็บไว้ในแต่ละระดับองค์ประกอบ (domain) ต่อ Vertex, Edge, Face ม ฯลฯ อยู่ที่เราเลือกว่าจะเก็บไว้แบบใหน เพื่อเอาไปทำอะไร
-   สามารถเรียกใช้ และ เข้าถึงได้ในรูปแบบของ Fields
-   จะถูกส่งผ่าน (propagated) ไปตามโหนด Geometry ต่างๆ
-   มีหลายประเภทหลักๆ คือ:
    -   **แบบ Dynamic:** คือตัวแปรทั่วไปของ blender (Global names) ที่มีให้ใช้งานอยู่เสมอ เช่น ตำแหน่ง (position), ดัชนีของ geometry (index), ดัชนีวัสดุ (material_index)
    -   **แบบ Static:** คือข้อมูลที่เราสร้างขึ้น หรือถูกสร้างขึ้นมา (Generated) เช่น ค่า UV, การเลือก (selection) , หรือ วิธีการคำนวณใดๆ ที่เรากำหนดขึั้น 

## 1.4.3 การใช้ Field กับ Attribute ร่วมกัน

![field](https://docs.blender.org/manual/en/3.0/_images/modeling_geometry-nodes_fields_title.png)

ข้อมูลประเภท Field input จะเป็นรูป สี่เหลี่ยม (diamond)

- **Position** field ของ position นำมา Scale กับ Index ผลที่ได้ >>
- **Set Position** ใส่ค่า Posisition ใหม่ จากค่าที่ได้จากการคำนวณข้างต้น


## 1.4.4 Attribute Domains

ข้อมูลแบบ attribute สามารถถูกผูกกับ “domain” ต่าง ๆ เช่น:

- **Point Domain** – สำหรับข้อมูลที่เปลี่ยนในแต่ละ vertex
- **Edge Domain** – สำหรับขอบ (ไม่รองรับทุก node)
- **Face/Corner Domain** – สำหรับหน้า polygon หรือมุม
- **Spline/Curve Domain** – สำหรับ curve หรือเส้น

ทำให้เราสามารถทำงานที่ระดับต่างๆ ของ Geometry ได้อย่างง่าย ลบทั้งวัตถุ , face หรือ edge หรือจะเลือกเป็นจุดๆ ใดๆ ก็ได้จากการเลือก Domain

![domain](../images/field/domain151739.png)

---

## สรุป

การเข้าใจระบบ Field และ Attribute จะช่วยให้คุณควบคุมรูปร่าง สี ขนาด และพฤติกรรมของ geometry ได้อย่างยืดหยุ่น  
ในบทถัดไป เราจะเริ่มทำงานกับ Curve และ Surface ซึ่งจะเป็นเครื่องมือพื้นฐานในการสร้างรูปทรงต่าง ๆ

**คำจำง่าย ๆ**  

- Field = สูตร  / logic กระบวนการ สำหรับ คำนวณ/ขุด/ค้นหา/ทำให้ได้มา/ ซึ่งข้อมูลที่ต้องกาาร เป็นค่าที่เปลี่ยนแปลงได้
- Attribute =  value / ค่า / ข้อมูล / ที่เก็บข้อมูล 

เราใช้สูตร (field) ทำงานกับข้อมูล (attribute) เพื่อควบคุม / จัดการ geometry!

---


Blender manual

- [Fields](https://docs.blender.org/manual/en/3.0/modeling/geometry_nodes/fields.html)

- [Attributes and Fields](https://code.blender.org/2021/08/attributes-and-fields/)

